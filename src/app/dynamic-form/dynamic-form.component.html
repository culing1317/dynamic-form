<div *ngIf="form">
  <form (ngSubmit)="onSubmit()" [formGroup]="form">
    <ng-container *ngTemplateOutlet="formTemplate; context: {$implicit:{models: formModels, form: form}}">
    </ng-container>
  </form>
</div>


<ng-template #formTemplate let-group>
        <div *ngFor="let model of group.models" [formGroup]="group.form">
            <div [ngSwitch]="model.type">
              <!-- 输入框 -->
              <!-- [ngStyle]="model.style" -->
              <div *ngSwitchCase="'input'" [ngStyle]="model.style">
                <label class="left-text">{{ model.name }}</label>
                <input [formControlName]="model.id" [value]="model.value" [placeholder]="model.placeholder" type="text"
                  on-change="onRadioChange($event, model, group.form)" class="right-text">
              </div>
              <!-- 多选框 -->
              <div *ngSwitchCase="'checkbox'" [formGroupName]="model.id">
                <label class="left-text">{{ model.name }}</label>
                <div class="right-text" *ngFor="let option of model.options">
                  <input [formControlName]="option.id" [name]="option.id" [id]="option.id" [checked]="option.value" type="checkbox"
                    on-change="onRadioChange($event, model, form)">
                  <label for="option.id">{{ option.name }}</label>
                </div>
              </div>
              <!-- 单选框 -->
              <div *ngSwitchCase="'radio'">
                <label class="left-text">{{ model.name }}</label>
                <div class="right-text" *ngFor="let option of model.options">
                  <input [formControlName]="model.id" [name]="model.id" type="radio" [value]="option.value" [id]="option.id"
                    on-change="onRadioChange($event, model, form)">
                  <label for="option.label">{{ option.name }}</label>
                </div>

              </div>
              <!-- 下拉单选框 -->
              <div *ngSwitchCase="'dropDown'">
                <label class="left-text">{{ model.name }}</label>
                <select class="right-text" [formControlName]="model.id" [value]="model.value" on-change="onRadioChange($event, model, form)">
                  <option *ngFor="let option of model.options" [value]="option.value">{{option.name}}</option>
                </select>
              </div>

              <!-- 颜色选择盘 -->
              <div *ngSwitchCase="'colorPicker'" [formGroupName]="model.id">
                <label class="left-text">{{ model.name }}</label>
                <div class="right-text" *ngFor="let option of model.options">
                  <input [formControlName]="option.id" [name]="option.id" [id]="option.id" [value]="option.value" type="color"
                    on-change="onRadioChange($event, model, form)">
                  <label for="option.id">{{ option.name }}</label>
                </div>
              </div>
              <!-- 一组组件 -->
              <div *ngSwitchCase="'group'">
                  <div [formGroupName]="model.id">
                      <ng-container *ngTemplateOutlet="formTemplate; context: {$implicit:{models: model.child, form: form.controls[model.id], formGroupName: model.id}}">

                        </ng-container>
                  </div>
              </div>
            </div>
          </div>
</ng-template>

